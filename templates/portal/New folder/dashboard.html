{% extends 'portal/base.html' %}
{% load dajaxice_templatetags %}

		{% block title %}Dashboard{% endblock %}
		
		{% block head %} 
			{% dajaxice_js_import %}
		{% endblock %}
		
		{% block style %}
			#event_notif {
				background-color:pink;
			}
			
			#add_event_form {
				background-color:pink;
			}
			
			#update_notif {
				background-color:pink;
			}
			
			#add_update_form {
				background-color:pink;
			}
			
			#add_event #submit {
				float:right;
				margin:5px;
			}
			
			#add_event div {
				padding:5px;
			}
			
			table li {
				display:inline
			}
		{% endblock %}
		
		{% block script %}
		    $(document).ready(function(){
				Dajaxice.portal.reload(Dajax.process);
				change_type();
			});
			
			function change_type() {
				$('input[name=date_time]').prop('type', 'datetime-local');
			}
			
			function change_input() {
				value = $('#id_date_time').val();
				value = value.replace('T',' ');
				$('#id_date_time').prop('type', 'datetime');
				$('#id_date_time').val(value);
				return true;
			}
			
			function change_update_input() {
				value = $('#f2 #id_date_time').val();
				value = value.replace('T',' ');
				$('#f2 #id_date_time').prop('type', 'datetime');
				$('#f2 #id_date_time').val(value);
				return true;
			}
			
			function confirm_deletion() {
				if (confirm('Are you sure you want to delete this entry?')){
					return true;
				}				
				else return false;
			}
			
			function cancel() {
				$('#add_event').html('');
			}
			
			function change_editform(id) {
				value = $('#id_date_time').val();
				value = value.replace(' ','T');
				$('#id_date_time').prop('type', 'datetime-local');
				$('#id_date_time').val(value);
			}
			
		{% endblock %}	
	{% block body %}
		<h3>EVENTS</h3>
		<div id='div_events'>
		</div>
		<div id='event_notif'></div>
		<button onclick="$('#f1')[0].reset()" class='btn btn-default btn-xs'>reset</button>
		<div id='add_event_form'>
			<form id='f1' class="form form-horizontal">
			{% csrf_token %}
		        {{ add_event_form.as_table }}				
				<a class='btn btn-primary btn-xs' onclick="if(change_input()) Dajaxice.portal.save_event(Dajax.process, {'form':$('#f1').serialize(true)})" >Save</a>
				<a onclick='cancel()' class='btn btn-danger btn-xs'>Cancel</a>
			</form>
		</div>
		
		<h3>UPDATES</h3>
		<div id='div_updates'>
		</div>
		<div id='update_notif'></div>
		<button onclick="$('#f2')[0].reset()" class='btn btn-default btn-xs'>reset</button>
		<div id='add_update_form'>
			<form id='f2' class='form form-horizontal'>
			{% csrf_token %}
			    {{ add_update_form.as_table }}	
				<a class='btn btn-primary btn-xs' onclick="if(change_update_input()) Dajaxice.portal.save_update(Dajax.process, {'form':$('#f2').serialize(true)})" >save</a>
				<a onclick='cancel()' class='btn btn-danger btn-xs'>cancel</a>
			</form>	
		</div>
		
	{% endblock %}
		
		
		
		
		
		
		
		
		
